import { graphql as OctokitGraphql } from '@octokit/graphql';
import { PackageURL } from '@socketregistry/packageurl-js';
import type { SocketArtifact } from '../../utils/alert/artifact.mts';
import type { components } from '@octokit/openapi-types';
import type { OctokitResponse } from '@octokit/types';
export declare function getOctokitGraphql(): typeof OctokitGraphql;
export type Pr = components['schemas']['pull-request'];
export type GQL_MERGE_STATE_STATUS = 'BEHIND' | 'BLOCKED' | 'CLEAN' | 'DIRTY' | 'DRAFT' | 'HAS_HOOKS' | 'UNKNOWN' | 'UNSTABLE';
export type GQL_PR_STATE = 'OPEN' | 'CLOSED' | 'MERGED';
export type PrMatch = {
    author: string;
    baseRefName: string;
    headRefName: string;
    mergeStateStatus: GQL_MERGE_STATE_STATUS;
    number: number;
    state: GQL_PR_STATE;
    title: string;
};
export declare function cacheFetch<T>(key: string, fetcher: () => Promise<T>, ttlMs?: number | undefined): Promise<T>;
export type GhsaDetails = {
    ghsaId: string;
    cveId?: string;
    summary: string;
    severity: string;
    publishedAt: string;
    withdrawnAt?: string;
    references: Array<{
        url: string;
    }>;
    vulnerabilities: {
        nodes: Array<{
            package: {
                ecosystem: string;
                name: string;
            };
            vulnerableVersionRange: string;
        }>;
    };
};
export declare function fetchGhsaDetails(ids: string[]): Promise<Map<string, GhsaDetails>>;
export type CleanupPrsOptions = {
    newVersion?: string | undefined;
    purl?: string | undefined;
    workspace?: string | undefined;
};
export declare function cleanupPrs(owner: string, repo: string, options?: CleanupPrsOptions | undefined): Promise<PrMatch[]>;
export type PrAutoMergeState = {
    enabled: boolean;
    details?: string[];
};
export declare function enablePrAutoMerge({ node_id: prId }: Pr): Promise<PrAutoMergeState>;
export type SocketPrsOptions = {
    author?: string | undefined;
    newVersion?: string | undefined;
    purl?: string | undefined;
    states?: string[] | string | undefined;
    workspace?: string | undefined;
};
export declare function getSocketPrs(owner: string, repo: string, options?: SocketPrsOptions | undefined): Promise<PrMatch[]>;
export type OpenPrOptions = {
    baseBranch?: string | undefined;
    cwd?: string | undefined;
    workspace?: string | undefined;
};
export declare function openPr(owner: string, repo: string, branch: string, purl: string | PackageURL | SocketArtifact, newVersion: string, options?: OpenPrOptions | undefined): Promise<OctokitResponse<Pr> | null>;
export type OpenCoanaPrOptions = {
    baseBranch?: string | undefined;
    cwd?: string | undefined;
    ghsaDetails?: Map<string, GhsaDetails> | undefined;
};
export declare function openCoanaPr(owner: string, repo: string, branch: string, ghsaIds: string[], options?: OpenCoanaPrOptions | undefined): Promise<OctokitResponse<Pr> | null>;
export declare function prExistForBranch(owner: string, repo: string, branch: string): Promise<boolean>;
export declare function setGitRemoteGithubRepoUrl(owner: string, repo: string, token: string, cwd?: string): Promise<boolean>;
//# sourceMappingURL=pull-request.d.mts.map